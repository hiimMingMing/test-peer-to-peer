<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Controller</title>
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>
  <h1>ğŸ“² Äiá»u khiá»ƒn</h1>
  <div id="status">â³ Äang káº¿t ná»‘i...</div>
  <br/>
  <button onclick="send('left')">â¬…ï¸ TrÃ¡i</button>
  <button onclick="send('right')">â¡ï¸ Pháº£i</button>
  <button onclick="send('jump')">ğŸ•´ï¸ Nháº£y</button>

  <script>
    const peerId = new URLSearchParams(location.search).get("peerId");

    const peer = new Peer({
  config: {
    iceServers: [
      {
        urls: 'relay1.expressturn.com:3478',
        username: 'efKXWNMP7A3ZXS5822',
        credential: 'thrAF4jO46h4uTSE'
      }
    ]
  }
});

    let conn;

    peer.on('open', () => {
      conn = peer.connect(peerId);
      conn.on('open', () => {
        document.getElementById('status').innerText = "âœ… ÄÃ£ káº¿t ná»‘i tá»›i " + peerId;
      });
      conn.on('error', err => {
        document.getElementById('status').innerText = "âŒ Lá»—i káº¿t ná»‘i!";
      });
    });

    function send(action) {
      if (conn && conn.open) {
        conn.send({ action });
      }
    }
  </script>
</body>
</html>
